---
# Copyright: (c) 2024, Ansible Project
# GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)

DOCUMENTATION:
  module: web_application
  short_description: Configures IIS web applications
  description: >
    Creates, removes, and configures IIS web applications.
  options:
    name:
      description:
        - Name of the web application.
      type: str
      required: true
    site:
      description:
        - Name of the site on which the application is created.
      type: str
      required: true
    state:
      description:
        - State of the web application.
      type: str
      choices:
        - absent
        - present
      default: present
    physical_path:
      description:
        - The physical path on the remote host to use for the new application.
        - The specified folder must already exist.
      type: str
      aliases:
        - path
    application_pool:
      description:
        - The application pool in which the new site executes.
        - If not specified, the application pool of the current website will be used.
      type: str
    connect_as:
      description:
        - The type of authentication to use for this application. Either C(pass_through) or C(specific_user).
        - If C(pass_through), IIS will use the identity of the user or application pool identity to access the file system or network.
        - If C(specific_user), IIS will use the credentials provided in I(username) and I(password) to access the file system or network.
      type: str
      choices:
        - pass_through
        - specific_user
    username:
      description:
        - Specifies the user name of an account that can access configuration files and content for this application.
        - Required when I(connect_as) is set to C(specific_user).
      type: str
    password:
      description:
        - The password associated with I(username).
        - Required when I(connect_as) is set to C(specific_user).
      type: str
  seealso:
    - module: microsoft.iis.win_iis_virtualdirectory
    - module: microsoft.iis.win_iis_webapppool
    - module: microsoft.iis.win_iis_webbinding
    - module: microsoft.iis.win_iis_website
  author:
    - Henrik Wallstr√∂m (@henrikwallstrom)

EXAMPLES: |
  - name: Add ACME webapplication on IIS.
    microsoft.iis.web_application:
      name: api
      site: acme
      state: present
      physical_path: C:\apps\acme\api

RETURN: {}
